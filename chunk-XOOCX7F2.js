import{a as S,b as _}from"./chunk-D2YMVFW4.js";import"./chunk-7GUHW4FQ.js";import{c as D}from"./chunk-JERYN6ER.js";import{a as x,c as E,e as O,g as R}from"./chunk-GYUUGYJE.js";import{j as v}from"./chunk-CCDOUNTY.js";import{Bb as C,Cb as m,Db as o,Eb as M,Sa as u,Xa as r,ac as I,cb as l,ec as T,gb as f,la as h,nc as g,ta as p,wa as d}from"./chunk-7OGJOBW4.js";var q=(()=>{let a=class a extends _{constructor(t,e,i,n){super(e,i,n),this.localeId=t,this.canvasId="temperatureChart",this.meanTemperature=[],this.maxTemperature=[],this.minTemperature=[],this.time=[]}ngOnChanges(t){t.forecastResult&&!t.forecastResult.isFirstChange()&&(this.calculateDataSets(),this.createChart())}ngAfterViewInit(){this.datePipe=new v(this.localeId),this.calculateDataSets(),super.ngAfterViewInit()}calculateDataSets(){let t=this.forecastResult?.list||[];this.meanTemperature=[],this.maxTemperature=[],this.minTemperature=[],this.time=[],t.forEach(e=>{let{main:{temp:i,temp_max:n,temp_min:y},dt:c}=e;if(!c){console.warn(`Date not found for forecast ${e}`);return}let P=this.datePipe.transform(c*1e3,"MMM, d HH");this.time.push(P),this.meanTemperature.push(i),this.maxTemperature.push(n),this.minTemperature.push(y)})}createChart(){let t={labels:this.time,datasets:[{data:this.meanTemperature,label:"Mean"},{data:this.maxTemperature,label:"Max"},{data:this.minTemperature,label:"Min"}]};if(this.chart){this.chart.data=t,this.chart.update();return}this.chart=new S(this.canvasId,{type:"line",data:t,options:{}}),this.updateColors()}};a.\u0275fac=function(e){return new(e||a)(r(g),r(D),r(h),r(d))},a.\u0275cmp=l({type:a,selectors:[["app-temperature-chart"]],inputs:{forecastResult:"forecastResult"},features:[f,p],decls:5,vars:2,consts:[[3,"id"]],template:function(e,i){e&1&&(m(0,"mat-card")(1,"mat-card-header"),I(2,"Temperature (\xB0C)"),o(),m(3,"mat-card-content"),M(4,"canvas",0),o()()),e&2&&(u(4),C("id",T(i.canvasId)))},dependencies:[R,x,E,O],styles:["[_nghost-%COMP%]   mat-card[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   mat-card-content[_ngcontent-%COMP%]{height:calc(100% - 2rem - 20px)}"]});let s=a;return s})();export{q as TemperatureChartComponent};
