import{a as O,b as y}from"./chunk-ICXQCQR7.js";import"./chunk-VI5MO46R.js";import{a as I,c as D,e as x,g as v}from"./chunk-WZ3WBC6R.js";import{j as T}from"./chunk-4KZH3CJE.js";import{$ as o,$b as C,Ab as l,Bb as s,Cb as n,Db as f,Ra as p,bb as u,dc as M,fb as d,mc as g,sa as h,ta as c}from"./chunk-IZ2TDBGB.js";var j=(()=>{let e=class e extends y{constructor(){super(...arguments),this.canvasId="temperatureChart",this.meanTemperature=[],this.maxTemperature=[],this.minTemperature=[],this.time=[],this.localeId=o(g)}ngOnChanges(t){t.forecastResult&&!t.forecastResult.isFirstChange()&&(this.calculateDataSets(),this.createChart())}ngAfterViewInit(){this.datePipe=new T(this.localeId),this.calculateDataSets(),super.ngAfterViewInit()}calculateDataSets(){let t=this.forecastResult?.list||[];this.meanTemperature=[],this.maxTemperature=[],this.minTemperature=[],this.time=[],t.forEach(a=>{let{main:{temp:r,temp_max:S,temp_min:P},dt:m}=a;if(!m){console.warn(`Date not found for forecast ${a}`);return}let _=this.datePipe.transform(m*1e3,"MMM, d HH");this.time.push(_),this.meanTemperature.push(r),this.maxTemperature.push(S),this.minTemperature.push(P)})}createChart(){let t={labels:this.time,datasets:[{data:this.meanTemperature,label:"Mean"},{data:this.maxTemperature,label:"Max"},{data:this.minTemperature,label:"Min"}]};if(this.chart){this.chart.data=t,this.chart.update();return}this.chart=new O(this.canvasId,{type:"line",data:t,options:{}}),this.updateColors()}};e.\u0275fac=(()=>{let t;return function(r){return(t||(t=c(e)))(r||e)}})(),e.\u0275cmp=u({type:e,selectors:[["app-temperature-chart"]],inputs:{forecastResult:"forecastResult"},features:[d,h],decls:5,vars:2,consts:[[3,"id"]],template:function(a,r){a&1&&(s(0,"mat-card")(1,"mat-card-header"),C(2,"Temperature (\xB0C)"),n(),s(3,"mat-card-content"),f(4,"canvas",0),n()()),a&2&&(p(4),l("id",M(r.canvasId)))},dependencies:[v,I,D,x],styles:["[_nghost-%COMP%]   mat-card[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   mat-card-content[_ngcontent-%COMP%]{height:calc(100% - 2rem - 20px)}"]});let i=e;return i})();export{j as TemperatureChartComponent};
