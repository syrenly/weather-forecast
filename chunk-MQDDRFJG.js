import{a as v,b as O}from"./chunk-ICXQCQR7.js";import"./chunk-VI5MO46R.js";import{a as M,c as I,e as D,g as w}from"./chunk-WZ3WBC6R.js";import{j as g}from"./chunk-4KZH3CJE.js";import{$ as o,$b as u,Ab as m,Bb as s,Cb as r,Db as f,Ra as p,bb as d,dc as C,fb as l,mc as P,sa as c,ta as h}from"./chunk-IZ2TDBGB.js";var V=(()=>{let i=class i extends O{constructor(){super(...arguments),this.canvasId="precipitationChart",this.rainPrecipitations=[],this.snowPrecipitations=[],this.time=[],this.localeId=o(P)}ngOnChanges(t){t.forecastResult&&!t.forecastResult.isFirstChange()&&(this.calculateDataSets(),this.createChart())}ngAfterViewInit(){this.calculateDataSets(),super.ngAfterViewInit()}calculateDataSets(){this.datePipe||this.initializeDatePipe();let t=this.forecastResult?.list||[];this.rainPrecipitations=[],this.snowPrecipitations=[],this.time=[],t.forEach(e=>{let{dt:a}=e;if(!a){console.warn(`Date not found for forecast ${e}`);return}let S=this.datePipe.transform(a*1e3,"MMM, d HH");this.time.push(S);let y=e.rain?.["3h"]||0;this.rainPrecipitations.push(y);let E=e.snow?.["3h"]||0;this.snowPrecipitations.push(E)})}createChart(){let t={labels:this.time,datasets:[{data:this.rainPrecipitations,label:"Rain"},{data:this.snowPrecipitations,label:"Snow"}]};if(this.chart){this.chart.data=t,this.chart.update();return}this.chart=new v(this.canvasId,{type:"line",data:t,options:{}}),this.updateColors()}initializeDatePipe(){this.datePipe=new g(this.localeId)}};i.\u0275fac=(()=>{let t;return function(a){return(t||(t=h(i)))(a||i)}})(),i.\u0275cmp=d({type:i,selectors:[["app-precipitation-chart"]],inputs:{forecastResult:"forecastResult"},features:[l,c],decls:5,vars:2,consts:[[3,"id"]],template:function(e,a){e&1&&(s(0,"mat-card")(1,"mat-card-header"),u(2,"Precipitation (mm)"),r(),s(3,"mat-card-content"),f(4,"canvas",0),r()()),e&2&&(p(4),m("id",C(a.canvasId)))},dependencies:[w,M,I,D],styles:["[_nghost-%COMP%]   mat-card[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   mat-card-content[_ngcontent-%COMP%]{height:calc(100% - 2rem - 20px)}"]});let n=i;return n})();export{V as PrecipitationChartComponent};
