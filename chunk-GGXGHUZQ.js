import{a as E,b as y}from"./chunk-V3PMPNMQ.js";import"./chunk-JUQ4HMHQ.js";import{c as g}from"./chunk-FPEX7SDO.js";import{a as v,c as w,e as D,g as R}from"./chunk-Y2A3B5DR.js";import"./chunk-PY3B2YYB.js";import{Ab as r,Bb as o,Cb as f,Da as d,Dc as M,Kb as u,Tb as C,Xa as l,Ya as a,Yb as P,fa as c,ib as m,jc as I,oa as h,wa as p}from"./chunk-NXOHNOOV.js";var V=(()=>{class n extends y{constructor(t,e,i,s){super(e,i,s),this.localeId=t,this.canvasId="precipitationChart",this.rainPrecipitations=[],this.snowPrecipitations=[],this.time=[]}ngOnChanges(t){t.forecastResult&&!t.forecastResult.isFirstChange()&&(this.calculateDataSets(),this.createChart())}ngAfterViewInit(){this.calculateDataSets(),super.ngAfterViewInit()}calculateDataSets(){this.datePipe||this.initializeDatePipe();let t=this.forecastResult?.list||[];this.rainPrecipitations=[],this.snowPrecipitations=[],this.time=[],t.forEach(e=>{let{dt:i}=e;if(!i){console.warn(`Date not found for forecast ${e}`);return}let s=this.datePipe.transform(i*1e3,"MMM, d HH");this.time.push(s);let O=e.rain?.["3h"]||0;this.rainPrecipitations.push(O);let S=e.snow?.["3h"]||0;this.snowPrecipitations.push(S)})}createChart(){let t={labels:this.time,datasets:[{data:this.rainPrecipitations,label:"Rain"},{data:this.snowPrecipitations,label:"Snow"}]};if(this.chart){this.chart.data=t,this.chart.update();return}this.chart=new E(this.canvasId,{type:"line",data:t,options:{}}),this.updateColors()}initializeDatePipe(){this.datePipe=new M(this.localeId)}static{this.\u0275fac=function(e){return new(e||n)(a(I),a(g),a(p),a(d))}}static{this.\u0275cmp=c({type:n,selectors:[["app-precipitation-chart"]],inputs:{forecastResult:"forecastResult"},standalone:!0,features:[m,h,P],decls:5,vars:1,consts:[[3,"id"]],template:function(e,i){e&1&&(r(0,"mat-card")(1,"mat-card-header"),C(2,"Precipitation (mm)"),o(),r(3,"mat-card-content"),f(4,"canvas",0),o()()),e&2&&(l(4),u("id",i.canvasId))},dependencies:[R,v,w,D],styles:["[_nghost-%COMP%]   mat-card[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   mat-card-content[_ngcontent-%COMP%]{height:calc(100% - 2rem - 20px)}"]})}}return n})();export{V as PrecipitationChartComponent};
